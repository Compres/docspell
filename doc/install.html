<html><head><title>Docspell: Installation</title><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="eikek" /><meta name="description" content="Docspell – A Document Organizer" /><meta name="og:image" content="/docspell/img/poster.png" /><meta name="image" property="og:image" content="/docspell/img/poster.png" /><meta name="og:title" content="Docspell: Installation" /><meta name="title" property="og:title" content="Docspell: Installation" /><meta name="og:site_name" content="Docspell" /><meta name="og:url" content="" /><meta name="og:type" content="website" /><meta name="og:description" content="Docspell – A Document Organizer" /><link rel="icon" type="image/png" href="/docspell/img/favicon.png" /><meta name="twitter:title" content="Docspell: Installation" /><meta name="twitter:image" content="/docspell/img/poster.png" /><meta name="twitter:description" content="Docspell – A Document Organizer" /><meta name="twitter:card" content="summary_large_image" /><link rel="icon" type="image/png" sizes="96x96" href="/docspell/img/favicon.png" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" /><link rel="stylesheet" href="/docspell/highlight/styles/default.css" /><link rel="stylesheet" href="/docspell/css/style.css" /><link rel="stylesheet" href="/docspell/css/palette.css" /><link rel="stylesheet" href="/docspell/css/codemirror.css" /><link rel="stylesheet" href="/docspell/css/docspell.css" /></head><body class="docs"><div id="wrapper"><div id="sidebar-wrapper"><ul id="sidebar" class="sidebar-nav"><li class="sidebar-brand"><a href="/docspell/" class="brand"><div class="brand-wrapper"><span>Docspell</span></div></a></li> <li><a href="/docspell/index.html" class="">Home</a></li> <li><a href="/docspell/getit.html" class="">Getit</a></li> <li><a href="/docspell/doc.html" class="">Documentation</a> <ul class="sub_section"> <li><a href="/docspell/doc/install.html" class=" active ">Installation</a></li> <li><a href="/docspell/doc/configure.html" class="">Configuring</a></li> <li><a href="/docspell/doc/metadata.html" class="">Adding Meta Data</a></li> <li><a href="/docspell/doc/uploading.html" class="">Uploads</a></li> <li><a href="/docspell/doc/processing.html" class="">Processing Queue</a></li> <li><a href="/docspell/doc/curate.html" class="">Find and Review</a></li> <li><a href="/docspell/doc/joex.html" class="">Joex</a></li> <li><a href="/docspell/doc/tools.html" class="">Tools</a></li></ul></li> <li><a href="/docspell/dev.html" class="">Development</a> <ul class="sub_section"> <li><a href="/docspell/dev/adr.html" class=""></a></li></ul></li> <li><a href="/docspell/api.html" class="">Api</a> <ul class="sub_section"> <li><a href="/docspell/openapi/docspell-openapi.html" class="">REST Api Doc</a></li> <li><a href="/docspell/openapi/docspell-openapi.yml" class="">REST OpenApi Spec</a></li></ul></li></ul></div><div id="page-content-wrapper"><div class="nav"><div class="container-fluid"><div class="row"><div class="col-lg-12"><div class="action-menu pull-left clearfix"><a href="#menu-toggle" id="menu-toggle"><i class="fa fa-bars" aria-hidden="true"></i></a></div><ul class="pull-right"><li id="gh-eyes-item" class="hidden-xs"><a href="https://github.com/eikek/docspell"><i class="fa fa-eye"></i><span>WATCH<span id="eyes" class="label label-default">--</span></span></a></li><li id="gh-stars-item" class="hidden-xs"><a href="https://github.com/eikek/docspell"><i class="fa fa-star-o"></i><span>STARS<span id="stars" class="label label-default">--</span></span></a></li></ul></div></div></div></div><div id="content" data-github-owner="eikek" data-github-repo="docspell"><div class="content-wrapper"><section><h1 id="installation">Installation</h1>

<p>This page contains detailed installation instructions. For a quick
start, refer to <a href="../getit.html">this page</a>.</p>

<p>Docspell has been developed and tested on a GNU/Linux system. It may
run on Windows and MacOS machines, too (ghostscript and tesseract are
available on these systems). But I’ve never tried.</p>

<p>Docspell consists of two components that are started in separate
processes:</p>

<ol>
  <li><em>REST Server</em> This is the main application, providing the REST Api
and the web application.</li>
  <li><em>Joex</em> (job executor) This is the component that does the document
processing.</li>
</ol>

<p>They can run on multiple machines. All REST server and Joex instances
should be on the same network. It is not strictly required that they
can reach each other, but the components can then notify themselves
about new or done work.</p>

<p>While this is possible, the simple setup is to start both components
once on the same machine.</p>

<p>The <a href="https://github.com/eikek/docspell/releases">download page</a>
provides pre-compiled packages and the <a href="dev.html">development page</a>
contains build instructions.</p>

<h2 id="prerequisites">Prerequisites</h2>

<p>The two components have one prerequisite in common: they both require
Java to run. While this is the only requirement for the <em>REST server</em>,
the <em>Joex</em> components requires some more external programs.</p>

<h3 id="java">Java</h3>

<p>Very often, Java is already installed. You can check this by opening a
terminal and typing <code class="highlighter-rouge">java -version</code>. Otherwise install Java using your
package manager or see <a href="https://adoptopenjdk.net/">this site</a> for
other options.</p>

<p>It is enough to install the JRE. The JDK is required, if you want to
build docspell from source.</p>

<p>Docspell has been tested with Java version 1.8 (or sometimes referred
to as JRE 8 and JDK 8, respectively). The pre-build packages are also
build using JDK 8. But a later version of Java should work as well.</p>

<p>The next tools are only required on machines running the <em>Joex</em>
component.</p>

<h3 id="external-tools-for-joex">External Tools for Joex</h3>

<ul>
  <li><a href="http://pages.cs.wisc.edu/~ghost/">Ghostscript</a> (the <code class="highlighter-rouge">gs</code> command)
is used to extract/convert PDF files into images that are then fed
to ocr. It is available on most GNU/Linux distributions.</li>
  <li><a href="https://github.com/Flameeyes/unpaper">Unpaper</a> is a program that
pre-processes images to yield better results when doing ocr. If this
is not installed, docspell tries without it. However, it is
recommended to install, because it <a href="https://github.com/tesseract-ocr/tesseract/wiki/ImproveQuality">improves text
extraction</a>
(at the expense of a longer runtime).</li>
  <li><a href="https://github.com/tesseract-ocr/tesseract">Tesseract</a> is the tool
doing the OCR (converts images into text). It is a widely used open
source OCR engine. Tesseract 3 and 4 should work with docspell; you
can adopt the command line in the configuration file, if necessary.</li>
</ul>

<h3 id="example-debian">Example Debian</h3>

<p>On Debian this should install all joex requirements:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get <span class="nb">install </span>ghostscript tesseract-ocr tesseract-ocr-deu tesseract-ocr-eng unpaper
</code></pre></div></div>

<h2 id="database">Database</h2>

<p>Both components must have access to a SQL database. Docspell has
support these databases:</p>

<ul>
  <li>PostreSQL</li>
  <li>MariaDB</li>
  <li>H2</li>
</ul>

<p>The H2 database is an interesting option for personal and mid-size
setups, as it requires no additional work. It is integrated into
docspell and works really well. It is also configured as the default
database.</p>

<p>For large installations, PostgreSQL or MariaDB is recommended. Create
a database and a user with enough privileges (read, write, create
table) to that database.</p>

<p>When using H2, make sure that all components access the same database
– the jdbc url must point to the same file. Then, it is important to
add the options
<code class="highlighter-rouge">;MODE=PostgreSQL;DATABASE_TO_LOWER=TRUE;AUTO_SERVER=TRUE</code> at the end
of the url. See the <a href="configure.html">default config</a> for an example.</p>

<h2 id="installing-from-zip-files">Installing from ZIP files</h2>

<p>After extracting the zip files, you’ll find a start script in the
<code class="highlighter-rouge">bin/</code> folder.</p>

<h2 id="installing-from-deb-packages">Installing from DEB packages</h2>

<p>The DEB packages can be installed on Debian, or Debian based Distros:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>dpkg <span class="nt">-i</span> docspell<span class="k">*</span>.deb
</code></pre></div></div>

<p>Then the start scripts are in your <code class="highlighter-rouge">$PATH</code>. Run <code class="highlighter-rouge">docspell-restserver</code>
or <code class="highlighter-rouge">docspell-joex</code> from a terminal window.</p>

<p>The packages come with a systemd unit file that will be installed to
autostart the services.</p>

<h2 id="running">Running</h2>

<p>Run the start script (in the corresponding <code class="highlighter-rouge">bin/</code> directory when using
the zip files):</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ./docspell-restserver*/bin/docspell-restserver
$ ./docspell-joex*/bin/docspell-joex
</code></pre></div></div>

<p>This will startup both components using the default configuration. The
configuration should be adopted to your needs. For example, the
database connection is configured to use a H2 database in the <code class="highlighter-rouge">/tmp</code>
directory. Please refer to the <a href="configure.html">configuration page</a>
for how to create a custom config file. Once you have your config
file, simply pass it as argument to the command:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ./docspell-restserver*/bin/docspell-restserver /path/to/server-config.conf
$ ./docspell-joex*/bin/docspell-joex /path/to/joex-config.conf
</code></pre></div></div>

<p>After starting the rest server, you can reach the web application at
path <code class="highlighter-rouge">/app/index.html</code>, so using default values it would be
<code class="highlighter-rouge">http://localhost:7880/app/index.html</code>.</p>

<p>You should be able to create a new account and sign in. Check the
<a href="configure.html">configuration page</a> to further customize docspell.</p>

<h3 id="options">Options</h3>

<p>The start scripts support some options to configure the JVM. One often
used setting is the maximum heap size of the JVM. By default, java
determines it based on properties of the current machine. You can
specify it by given java startup options to the command:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ./docspell-restserver*/bin/docspell-restserver -J-Xmx1G -- /path/to/server-config.conf
</code></pre></div></div>

<p>This would limit the maximum heap to 1GB. The double slash separates
internal options and the arguments to the program. Another frequently
used option is to change the default temp directory. Usually it is
<code class="highlighter-rouge">/tmp</code>, but it may be desired to have a dedicated temp directory,
which can be configured:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ./docspell-restserver*/bin/docspell-restserver -J-Xmx1G -Djava.io.tmpdir=/path/to/othertemp -- /path/to/server-config.conf
</code></pre></div></div>

<p>The command:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ./docspell-restserver*/bin/docspell-restserver -h
</code></pre></div></div>

<p>gives an overview of supported options.</p>

<h2 id="raspberry-pi-and-similiar">Raspberry Pi, and similiar</h2>

<p>Both component can run next to each other on a raspberry pi or
similiar device.</p>

<h3 id="rest-server">REST Server</h3>

<p>The REST server component runs very well on the Raspberry Pi and
similiar devices. It doesn’t require much resources, because the heavy
work is done by the joex components.</p>

<h3 id="joex">Joex</h3>

<p>Running the joex component on the Raspberry Pi is possible, but will
result in long processing times. Tested on a RPi model 3 (4 cores, 1G
RAM) processing a PDF (scanned with 300dpi) with two pages took
9:52. You can speed it up considerably by uninstalling the <code class="highlighter-rouge">unpaper</code>
command, because this step takes quite long. This, of course, reduces
the quality of OCR. But without <code class="highlighter-rouge">unpaper</code> the same sample pdf was then
processed in 1:24, a speedup of 8 minutes.</p>

<p>You should limit the joex pool size to 1 and, depending on your model
and the amount of RAM, set a heap size of at least 500M
(<code class="highlighter-rouge">-J-Xmx500M</code>).</p>

<p>For personal setups, when you don’t need the processing results asap,
this can work well enough.</p>
</section></div></div></div></div><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script><script src="/docspell/highlight/highlight.pack.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/json.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/javascript.min.js"></script><script>hljs.configure({languages:['scala','java','bash','json','javascript']});
hljs.initHighlighting();
              </script><script src="/docspell/js/main.js"></script></body></html>